

# Описание проекта

Данный репозиторий предназначен для реализации программы, с помощью которой можно получать погоду в конкретном городе и по текущему местоположению, а также просматривать историю запросов.

## Что планируется сделать

1. Получение информации о погоде по названию города.  
   - Будет использоваться сервис [OpenWeatherMap](https://openweathermap.org/current), позволяющий получать погоду по названию города.    
   - Для получения информации будем отправлять HTTP-запросы к API с указанием названия города и API ключ.  
   - Для отправки запросов понадобится библиотека `requests`. Для валидации и структурирования данных будем использовать библиотеку `pydantic`.

2. Определение текущего местоположения и получение информации о погоде по нему.  
   - Для определения текущего месторасположения будем отправлять запрос к сервису [ipapi](https://ipapi.co/json). В ответе на запрос сервис отправляет текущие координаты.  
   - После определения координат текущего местоположения, будем отправлять HTTP-запрос к API [OpenWeatherMap](https://openweathermap.org/current) с указанием этих координат и API ключа. 
   - Библиотеки: requests, pydantic

3. Хранение истории результатов запросов.  
   - Историю результатов запросов будем хранить в БД SQLite. Каждый запрос будет добавляться в таблицу в виде новой записи.    
   - Для вывода истории запросов будем делать запрос к БД SQLite и получать n записей и выводить их пользователю в консоли.
   - Библиотека: pydantic, sqlite3

4. Интерфейс программы (консольное приложение).  
   - Программа будет иметь консольный интерфейс с командами, реализованными с помощью библиотеки `typer`.
   - Пользователь будет выбирать действие, вводя соответствующую команду. В зависимости от выбора будет выполняться соответствующая функция.

5. Обработка ошибок и некорректных данных.  
   - Обработка ошибок будет выполняться с помощью конструкции `try...except`. Это позволит программе корректно реагировать на невалидные значения, ошибки API и другие исключения, не прерывая выполнение программы. 
   - Если во время запроса к OpenWeatherMap произошли проблемы (сеть недоступна, неверный ключ), программа будет выдавать сообщение об ошибке и предлагать попробовать снова.
   - Если не удалось определить текущее местоположение, также будет выдаваться сообщение об ошибке и предлагаться повторить операцию или выполнить другую команду.

## Библиотеки

    `requests` - для HTTP-запросов
    `pydantic` - для валидации и структурирования данных
    `typer` - для создания консольного интерфейса
    `sqlite3` - для работы с БД SQLite
    'python-dotenv' - для выноса API ключа в .env

## Как запустить проект

1. Установите зависимости из файла `requirements.txt`:
   ```bash
   pip install -r requirements.txt
   ```
2. Создайте файл `.env` на основе `example.env` и заполните его необходимыми данными.  
3. Запустите проект командой:
   ```bash
   python main.py
   ```
